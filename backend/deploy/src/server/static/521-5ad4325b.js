"use strict";(self.webpackChunkntti_2023_client=self.webpackChunkntti_2023_client||[]).push([[521],{5500:(e,t,n)=>{n.d(t,{Jp:()=>i,ln:()=>q,L6:()=>a,Cb:()=>s,jx:()=>o});var r=n(4268),a=(0,r.hg)("Folder/createFolder",(function(e,t){return n=void 0,r=void 0,l=function(){var n,r,a,l;return function(e,t){var n,r,a,l,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}(this,(function(i){switch(i.label){case 0:n=t.extra,r=t.rejectWithValue,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.api.post("/api/folder/create",e)];case 2:if(!(a=i.sent()).data)throw new Error;return[2,a.data];case 3:return l=i.sent(),console.log(l),[2,r("error")];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function s(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,s)}o((l=l.apply(n,r||[])).next())}));var n,r,a,l})),l=(0,r.oM)({name:"FolderSlice",initialState:{data:void 0,isLoading:!1,error:void 0},reducers:{},extraReducers:function(e){e.addCase(a.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(a.fulfilled,(function(e){e.isLoading=!1})).addCase(a.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload}))}}),i=(l.actions,l.reducer),s=function(e){var t;return null===(t=e.folder)||void 0===t?void 0:t.isLoading},o=n(8608).p.injectEndpoints({endpoints:function(e){return{fetchFolders:e.query({query:function(){return{url:"/api/folder/fetch_all"}}})}}}).useFetchFoldersQuery,c=n(5893),u=n(4807),d=n(7294),f=n(7543),p=n(7828),h=n(2469),x=n(3855),v=n(9250),m=n(7820),b=n(3379),g=n.n(b),y=n(7795),j=n.n(y),w=n(569),k=n.n(w),S=n(3565),C=n.n(S),N=n(9216),Z=n.n(N),F=n(4589),T=n.n(F),L=n(568),P={};P.styleTagTransform=T(),P.setAttributes=C(),P.insert=k().bind(null,"head"),P.domAPI=j(),P.insertStyleElement=Z(),g()(L.Z,P);const A=L.Z&&L.Z.locals?L.Z.locals:void 0;var E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},E.apply(this,arguments)},O=(0,d.memo)((function(e){var t=e.className,n=e.folder,r=e.isFirst,a=(0,d.useState)(25),l=a[0],i=a[1],s=(0,d.useState)((0,c.jsx)(h.yr4,{})),o=s[0],b=s[1],g=(0,v.s0)(),y=(0,d.useCallback)((function(){25===l?(i(175),b((0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:"Распределения"}),(0,c.jsx)(h.LZ3,{})]}))):(i(25),b((0,c.jsx)(h.yr4,{})))}),[l]),j=(0,d.useCallback)((function(){g("".concat(x.h3.allocation,"?folder=").concat(null==n?void 0:n.title))}),[n,g]),w=(0,d.useCallback)((function(){g(x.h3.creategroup)}),[g]);return r?(0,c.jsx)("div",E({className:(0,u.A)(A.wrapper,{},[t])},{children:(0,c.jsxs)(f.g,E({maxW:!0,justify:"between",className:A.FolderCard},{children:[(0,c.jsx)(p.xv,{title:"Создать новую группу"}),(0,c.jsx)(m.z,E({variant:"clear",onClick:w},{children:(0,c.jsx)(h.SPS,{className:A.addIcon})}))]}))})):(0,c.jsx)("div",E({className:(0,u.A)(A.wrapper,{},[t])},{children:(0,c.jsxs)(f.g,E({maxW:!0,justify:"between",className:A.FolderCard},{children:[(0,c.jsx)(p.xv,{title:null==n?void 0:n.title}),(0,c.jsxs)(f.g,E({maxW:!0},{children:[(0,c.jsxs)(f.g,E({maxW:!0},{children:[(0,c.jsx)(p.xv,{size:"extrasmall",text:"Критерий группировки",align:"left",className:A.text}),(0,c.jsx)(p.xv,{size:"extrasmall",text:null==n?void 0:n.groupingRule})]})),(0,c.jsx)(f.U,E({gap:"8",justify:"center",onMouseEnter:y,onMouseLeave:y,onClick:j,style:{width:"".concat(l,"px")},className:A.expand},{children:o}))]}))]}))}))})),W=n(3877),M={};M.styleTagTransform=T(),M.setAttributes=C(),M.insert=k().bind(null,"head"),M.domAPI=j(),M.insertStyleElement=Z(),g()(W.Z,M);const z=W.Z&&W.Z.locals?W.Z.locals:void 0;var I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},I.apply(this,arguments)},q=(0,d.memo)((function(e){var t=e.className,n=e.folders;return(0,c.jsxs)(f.U,I({gap:"32",className:(0,u.A)(z.FoldersList,{},[t])},{children:[(0,c.jsx)(O,{isFirst:!0}),(null==n?void 0:n.length)?n.map((function(e){return(0,c.jsx)(O,{folder:e},e.id)})):(0,c.jsx)(p.xv,{title:"Пока групп нет",text:"Но Вы можете их создать!"})]}))}))},521:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var r=n(5893),a=n(4807),l=n(2594),i=n(7294),s=n(9704),o=n(7543),c=n(2540),u=n(8918),d=n(7828),f=n(1202),p=n(9975),h=n(7974),x=n(3621),v=n(3379),m=n.n(v),b=n(7795),g=n.n(b),y=n(569),j=n.n(y),w=n(3565),k=n.n(w),S=n(9216),C=n.n(S),N=n(4589),Z=n.n(N),F=n(6e3),T={};T.styleTagTransform=Z(),T.setAttributes=k(),T.insert=j().bind(null,"head"),T.domAPI=g(),T.insertStyleElement=C(),m()(F.Z,T);const L=F.Z&&F.Z.locals?F.Z.locals:void 0;var P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},P.apply(this,arguments)},A=(0,i.memo)((function(e){var t=e.className,n=e.placeholder,l=e.selected,s=e.onChange,c=e.data,u=(0,i.useCallback)((function(e){s(e.value)}),[s]);return(0,r.jsx)(o.U,P({maxW:!0,className:(0,a.A)(L.MultiSelect,{},[t])},{children:(0,r.jsx)(x.N,{emptyMessage:"Ничего не найдено",emptyFilterMessage:"Ничего не найдено",filter:!0,value:l,onChange:u,options:c,display:"chip",optionLabel:"title",placeholder:n,maxSelectedLabels:10})}))})),E=n(7820),O=n(2672),W=n(5500),M=n(6088),z=n(3942),I=n(3855),q=n(9250),_=n(8608).p.injectEndpoints({endpoints:function(e){return{fetchKeySkills:e.query({query:function(){return{url:"/api/fetch_key_skills"}}})}}}).useFetchKeySkillsQuery,U=n(4780),B={};B.styleTagTransform=Z(),B.setAttributes=k(),B.insert=j().bind(null,"head"),B.domAPI=g(),B.insertStyleElement=C(),m()(U.Z,B);const G=U.Z&&U.Z.locals?U.Z.locals:void 0;var J=function(){return J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},J.apply(this,arguments)};const K=(0,i.memo)((function(e){var t=e.className;(0,i.useEffect)((function(){document.title="Создать категорию"}),[]);var n=_().data,x=(0,O.T)(),v=(0,q.s0)(),m=(0,z.v9)(W.Cb),b=(0,i.useState)(""),g=b[0],y=b[1],j=(0,i.useState)(""),w=j[0],k=j[1],S=(0,i.useState)(-1),C=S[0],N=S[1],Z=(0,i.useState)([]),F=Z[0],T=Z[1],L=(0,i.useState)([]),P=L[0],U=L[1],B=(0,i.useState)([18,40]),K=B[0],Q=B[1],R=(0,i.useMemo)((function(){return["Возраст","Факультет","Ключевые навыки"]}),[]),V=(0,i.useMemo)((function(){return""===w||-1===C||1===C&&!F.length||2===C&&!P.length}),[w,F,P,C]),D=(0,i.useCallback)((function(e){return t=void 0,n=void 0,a=function(){return function(e,t){var n,r,a,l,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}(this,(function(t){switch(t.label){case 0:return e.preventDefault(),[4,x((0,W.L6)({folderTitle:w,params:{param:0===C?"age":1===C?"faculty":"keySkills",value:0===C?K.join("-"):1===C?F.join(","):P.map((function(e){return e.title})).join(",")}}))];case 1:return"fulfilled"===t.sent().meta.requestStatus&&v(I.h3.grouping),[2]}}))},new((r=void 0)||(r=Promise))((function(e,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function s(e){try{o(a.throw(e))}catch(e){l(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,s)}o((a=a.apply(t,n||[])).next())}));var t,n,r,a}),[v,K,x,w,F,P,C]),H=(0,i.useCallback)((function(e){Q(e.value)}),[]);return(0,i.useEffect)((function(){N(R.findIndex((function(e){return e===g})))}),[g,R]),(0,r.jsx)(M.W,J({reducers:{folder:W.Jp}},{children:(0,r.jsxs)(l.T,J({className:(0,a.A)(G.CreateFolderPage,{},[t])},{children:[(0,r.jsx)(s.V,{title:"Создать группу"}),(0,r.jsx)("form",J({onSubmit:D},{children:(0,r.jsxs)(o.g,J({maxW:!0},{children:[(0,r.jsx)(u.i,J({align:"left",className:G.divider},{children:(0,r.jsx)(d.xv,{className:G.dividerTitle,align:"left",text:"Название группы",size:"small"})})),(0,r.jsx)(c.I,{required:!0,value:w,onChange:k,placeholder:"Название группы"}),(0,r.jsx)(u.i,J({align:"left",className:G.divider},{children:(0,r.jsx)(d.xv,{className:G.dividerTitle,align:"left",text:"Способ заполнения группы",size:"small"})})),(0,r.jsx)(f.L,{options:R,value:g,onChange:function(e){return y(e.value)},emptyMessage:(0,r.jsx)("p",{children:"Ничего не найдено"}),placeholder:"Выберите параметр группировки",required:!0}),g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.i,J({align:"left",className:G.divider},{children:(0,r.jsx)(d.xv,{className:G.dividerTitle,align:"left",text:"Выберите критерий отбора",size:"small"})})),0===C&&(0,r.jsxs)(o.U,J({className:G.sliderWrapper,maxW:!0,gap:"16"},{children:[(0,r.jsx)("p",{children:K[0]}),(0,r.jsx)("div",J({style:{width:"100%"}},{children:(0,r.jsx)(h.i,{min:18,max:40,value:K,onChange:H,range:!0})})),(0,r.jsx)("p",{children:K[1]})]})),1===C&&(0,r.jsx)(p.m,{selectedParams:F,setSelectedParams:T}),2===C&&(0,r.jsx)(A,{data:n,selected:P,onChange:U,placeholder:"Выберите ключевые навыки"})]}),(0,r.jsx)(E.z,J({disabled:V,isLoading:m,className:G.submitBtn,type:"submit"},{children:"Сформировать группу"}))]}))}))]}))}))}))},568:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),l=n(3645),i=n.n(l)()(a());i.push([e.id,".d20c1{width:390px;height:500px;flex-shrink:0}.b5684{height:100%;padding:30px;border-radius:16px;flex-grow:1;outline:4px solid #b6f09c}.bb134 p{font-weight:bold}.e0efd{cursor:pointer;height:36px;padding:2px;border-radius:8px;background:gray;font-size:16px;transition:200ms;overflow:hidden;white-space:nowrap}.e0efd:hover{color:#000;background:#b6f09c;transform:scale(1.05)}.ea01b{width:75px;height:75px;color:#b6f09c;transition:200ms}.ea01b:hover{transform:scale(1.05)}",""]),i.locals={wrapper:"d20c1",FolderCard:"b5684",text:"bb134",expand:"e0efd",addIcon:"ea01b"};const s=i},3877:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),l=n(3645),i=n.n(l)()(a());i.push([e.id,".fcfdd{padding:10px;overflow-x:auto}",""]),i.locals={FoldersList:"fcfdd"};const s=i},4780:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),l=n(3645),i=n.n(l)()(a());i.push([e.id,".ffee3{margin:35px 0 0}.ffee3:first-child{margin:0}.e4ff7{padding:2px 7px;border-radius:8px;background:#1a1d21}.e4ff7 p{color:#999}.d47ff{width:100%}.af766{margin-top:100px;align-self:end}",""]),i.locals={divider:"ffee3",dividerTitle:"e4ff7",sliderWrapper:"d47ff",submitBtn:"af766"};const s=i},6e3:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),l=n(3645),i=n.n(l)()(a());i.push([e.id,"",""]),i.locals={};const s=i}}]);